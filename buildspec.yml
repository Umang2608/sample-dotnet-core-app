  
version: 0.2

phases:
  install:
    commands:
      - echo Entered the install phase...
      
      
    finally:
      - echo This always runs even if the update or install command fails 
  pre_build:
    commands:
      - echo Entered the pre_build phase...
      
      - docker login -u jarvis -p eyJwYXlsb2FkIjoiM01NeWlGMDB1aTExS1BycGhDOFlxdFE2NENhWDdBZTFHMGRKemdvSnFDK3ZkOEt5ZjV3WXRNN1Jpc2VJME5uWHhMOEhVSDdteU96YjJDaUhHemcvdVArT1dTQkdBdXlHcHlJR3c1Tm1nenBvY09SWVVmV01CSEFTOGJDWkMzNEVoNVcwaFozSFYvb0JiaCtIYmJCVWp4N2poZDRXbjcvemZKdzl2VU5Na0JTT2pMZXhvc3JybFNqYXpGLzhDNHVlMWtLOXU1UHZMYjU1Vi9vb2RxcFNTQVlYa3Rqamhrd3lBYzNRL2lvc2tqbk41T21IZk9QOVdtZC9wWGRXK2pLZUI3T01kaDdSSkJWN1M0dStsKzQ1eTZhSmZrZlUwU0w4Vm5MWmJlZXFSMTA1K2JaQXpUcklkMHhXSlVhVElmZ1MrSVRVZGNDSmhnb2ZSbkZuc0dULzRLT240RjBUSlVMRzJNYXk5VjBweVNFWldPd0x4V1pVbDNyMnp6Y0dkaXlLU1gvSVlzK0xKRzJPV3UxS2ttL29GYjRGT0dMeDdLQzRRTXJYTjQwQy9Ic1Yza1JOQWVsZTN3Y2hMRWVMYXlPSUtac0t5OFR4a0h5TGphVmRueFFnNTUzcEoxYlVIM05zY21TbHJsRE5kNDg5ZXRGZG92a28yZEpRemE1S0IzU3ZaOWhCdlhmWEh4Qkk2YlF1OERQOXdSZXRwSm42R293NXg0aDBmMWxYNGxQOXRqMVRQN3JFMjN1aitRNi9qNVJ4QkpBV1p0R29BMjVHSU9kTWVCajAwRlRlb0Jhb2J1eEQzZ2VYRUJ1d1g1cFdWN3lMdTNldEZZUUlZK29QeS84Z0VTUXRYR3A3TDlKcThRN2JneFZzU25xTzIzREJDMjJWTVhUTWtmUXdHdGFHTE5JMHhQTEtmQU96WVg0bWRLNFYzcEIwWHpqWlRPeStSRllCNlNpTEZFTUpMZXVmUlhhNGg0S2VLT0Vud08xbzI2Q0gwVnlwdGI4OWFVc2pkczNodE00TWl0RitveUZiL1ZvYzk5aks1RURHZUJrRFNIUWZ2dEpsWWFDZXpqNXN1K1Z0YVlSRzFsVkVyT0s3UXVhczJja2xoVWUrRlVpUTNkNUJQWUZZaC9HRTRGaW0wWk8xcjBWK2ZKRDhkQ3cyb3dTV0loLytaajBmQlR5M3JsKys0Rzc5cE53elB3enNoVGZrM1JvbDhENXNVOCtLY0pCTTFKTjN0WUlCSVMrMzY0RUdJTHNnNDVDWmhld2ZGdFp6MHp2S1hrUmxqS1l1QmdvQnIwK2phVnU4WDk4SEtVOFhnb0VDOW5NYXZmdUQ2M0ovVHlVaWx6UVhMMjVaWFRqbWsvdG9RRDJTWjBudWs5TnBScCsxOS9HUjNFUGQvV3RBVmJqSG5sMDN3b1N4WU1kVmhtSTdKT2xHTzI4VE1IOGtZOFRlRzRJZmJsNUtteWdUaUVON2krWlF4UHZXd3g4dXFQSTFlQjh2RlpGeW8zMFJxUVhPWHlkKzJDcFVDSlZNYjBQQkRHb2piYVFSTnhVUUVjdXJJQkdLcGYrbjJJRFpPV21DNmM3eCIsImRhdGFrZXkiOiJBUUVCQUhqQjcvaWd3TWc0TlB3YXVyeFNJWXg0SGZueHVHYy80OGJEd3Z3RHBOWVdaZ0FBQUg0d2ZBWUpLb1pJaHZjTkFRY0dvRzh3YlFJQkFEQm9CZ2txaGtpRzl3MEJCd0V3SGdZSllJWklBV1VEQkFFdU1CRUVERExIV1ZqWDNFb3libENpYkFJQkVJQTdyZmt0YnhqbHRPSVJjTUNMazBHMHVOanhvcHFYMHdFSEVrWU9sc1ZaR2lpVUp2RVFINXNDbnhzbjdRTG1oOXYzbnV2TGN5eUhZZVZOV1lFPSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTYwMjAxOTA1OH0=
      
    finally:
      - echo This always runs even if the login command fails
  build:
    commands:
      - echo Entered the build phase...
      - echo Build started on `date`
      
    finally:
      - echo This always runs even if the install command fails
  post_build:
    commands:
      - echo Entered the post_build phase...
     
      - docker build -t dotnetbuild:1 .
      - docker tag dotnetbuild:1 169003570647.dkr.ecr.us-east-2.amazonaws.com/usa/codepipeline/webapp
      - docker push 169003570647.dkr.ecr.us-east-2.amazonaws.com/usa/codepipeline/webapp
